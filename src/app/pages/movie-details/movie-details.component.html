<div class="min-h-screen bg-gradient-to-b from-gray-900 to-black text-white">
  <netflix-navbar></netflix-navbar>

  @if (movie) {
    <div class="container mx-auto px-4 pt-8 pb-16">
      <!-- Back button -->
      <button
        (click)="goBack()"
        class="flex items-center text-gray-300 hover:text-white mb-8 transition-colors"
      >
        <netflix-icon name="arrow-left" size="20" class="mr-2"/>
        Back to Browse
      </button>

      <!-- Movie content -->
      <div class="flex flex-col lg:flex-row gap-8">
        <!-- Poster column -->
        <div class="w-full lg:w-1/3 xl:w-1/4 flex-shrink-0">
          <netflix-movie-poster-image
            [poster_path]="movie.poster_path"
            class="rounded-lg shadow-2xl w-full h-auto"
          ></netflix-movie-poster-image>

          <div class="mt-4 flex justify-between items-center">
            <netflix-favorite-button
              [movie]="movie"
              class="text-3xl hover:scale-110 transition-transform"
            ></netflix-favorite-button>

            <div class="flex items-center">
              <netflix-icon name="star" size="20" class="text-yellow-400 mr-1"/>
              <span class="font-bold">{{ movie.vote_average?.toFixed(1) || 'N/A' }}</span>
              <span class="text-gray-400 ml-1">/10</span>
            </div>
          </div>
        </div>

        <!-- Details column -->
        <div class="flex-grow">
          <div class="mb-6">
            <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-2">{{ movie.title }}</h1>

            <div class="flex flex-wrap items-center gap-4 text-gray-300 mb-4">
              <span>{{ movie.release_date | date:'yyyy' }}</span>
              <span>•</span>
              <span>{{ movie.runtime }} min</span>
              <span>•</span>
              <span class="uppercase">{{ movie.original_language }}</span>
            </div>

            <div class="flex flex-wrap gap-2 mb-6">
              @for (genre of movie.genres; track genre.id) {
                <span class="px-3 py-1 bg-netflix-red rounded-full text-sm font-medium">
                  {{ genre.name }}
                </span>
              }
            </div>
          </div>

          <div class="mb-8">
            <h2 class="text-xl font-bold mb-3">Overview</h2>
            <p class="text-gray-300 leading-relaxed max-w-3xl">{{ movie.overview || 'No overview available.' }}</p>
          </div>

          <!-- Additional details -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            @if (movie.tagline) {
              <div>
                <h3 class="text-lg font-semibold mb-2">Tagline</h3>
                <p class="text-gray-400 italic">"{{ movie.tagline }}"</p>
              </div>
            }

            <div>
              <h3 class="text-lg font-semibold mb-2">Status</h3>
              <p class="text-gray-400">{{ movie.status || 'Unknown' }}</p>
            </div>

            @if (movie.production_companies?.length) {
              <div>
                <h3 class="text-lg font-semibold mb-2">Production</h3>
                <div class="flex flex-wrap gap-2">
                  @for (company of movie.production_companies; track company.id) {
                    <span class="text-gray-400">{{ company.name }}</span>
                    @if (!$last) {
                      <span class="text-gray-600">•</span>
                    }
                  }
                </div>
              </div>
            }
          </div>
        </div>
      </div>
    </div>
  } @else {
    <!-- Error/loading state -->
    <div class="container mx-auto px-4 py-16 text-center">
      @if (isLoading) {
        <div class="flex justify-center">
          <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-netflix-red"></div>
        </div>
      } @else {
        <netflix-icon name="alert-triangle" size="48" class="mx-auto text-yellow-500 mb-4"/>
        <h2 class="text-2xl font-bold mb-2">Error loading movie details</h2>
        <p class="text-gray-400 mb-6">We couldn't load the movie information. Please try again.</p>
        <button
          (click)="retry()"
          class="px-6 py-2 bg-netflix-red hover:bg-red-700 rounded font-medium transition-colors"
        >
          Retry
        </button>
      }
    </div>
  }
</div>
